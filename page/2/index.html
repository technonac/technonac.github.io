<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>第 2 页 | Canon&#39;s Blog</title>
  <meta name="author" content="technonac">
  
  <meta name="description" content="Java,Android Blog">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="Canon&#39;s Blog"/>

  
    <meta property="og:image" content=""/>
  

  
  
    <link href="/favicon.png" rel="icon">
  

  <!-- CSS -->
  <link rel="stylesheet" href="/css/themes/sandstone.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight-default.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/comment.css" media="screen" type="text/css">
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.7/es5-sham.min.js"></script>
  <![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>
  
  <!-- analytics -->
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-114131858-1', 'auto');
  ga('send', 'pageview');
</script>



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?99f21b353655df817afcb7d4d21a0688";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>


</head>

 <body>  
  <nav id="main-nav" class="navbar  navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
	<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
       <a class="navbar-brand" href="/">Canon&#39;s Blog</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/categories" title="All the categories.">
			  <i class="fa fa-folder"></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/tags" title="All the tags.">
			  <i class="fa fa-tags"></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About me.">
			  <i class="fa fa-user"></i>About
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 <div class="page-header ">
  <h1 class="title ">代码改变生活</h1>
</div>

<div class="row page">

	
	<div class="col-md-9">
	

		<div class="slogan">
      <i class="fa fa-heart"></i>
      
</div>    
		<div id="top_search"></div>
		<div class="mypage">
		
		<!-- title and entry -->
        <!-- render top articles firstly -->
        
        <!-- render other articles -->
        
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2018-02-14 </div>
			<div class="article-title"><a href="/2018/02/14/linux-cmd-1-bash-shell-command/" >Linux命令行(1)Linux Bash Shell命令</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<h2 id="1-基本的bash-shell命令"><a href="#1-基本的bash-shell命令" class="headerlink" title="1. 基本的bash shell命令"></a>1. 基本的bash shell命令</h2><h3 id="Linux-文件系统"><a href="#Linux-文件系统" class="headerlink" title="Linux 文件系统"></a>Linux 文件系统</h3><h4 id="常见Linux目录名称"><a href="#常见Linux目录名称" class="headerlink" title="常见Linux目录名称"></a>常见Linux目录名称</h4><table>
<thead>
<tr>
<th>目    录</th>
<th>用    途</th>
</tr>
</thead>
<tbody>
<tr>
<td>/</td>
<td>虚拟目录的根目录。通常不会在这里存储文件</td>
</tr>
<tr>
<td>/bin</td>
<td>二进制目录，存放许多用户级的GNU工具</td>
</tr>
<tr>
<td>/boot</td>
<td>启动目录，存放启动文件</td>
</tr>
<tr>
<td>/dev</td>
<td>设备目录，Linux在这里创建设备节点</td>
</tr>
<tr>
<td>/etc</td>
<td>系统配置文件目录</td>
</tr>
<tr>
<td>/home</td>
<td>主目录，Linux在这里创建用户目录</td>
</tr>
<tr>
<td>/lib</td>
<td>库目录，存放系统和应用程序的库文件</td>
</tr>
<tr>
<td>/media</td>
<td>媒体目录，可移动媒体设备的常用挂载点</td>
</tr>
<tr>
<td>/mnt</td>
<td>挂载目录，另一个可移动媒体设备的常用挂载点</td>
</tr>
<tr>
<td>/opt</td>
<td>可选目录，常用于存放第三方软件包和数据文件</td>
</tr>
<tr>
<td>/proc</td>
<td>进程目录，存放现有硬件及当前进程的相关信息</td>
</tr>
<tr>
<td>/root</td>
<td>root用户的主目录</td>
</tr>
<tr>
<td>/sbin</td>
<td>系统二进制目录，存放许多GNU管理员级工具</td>
</tr>
<tr>
<td>/run</td>
<td>运行目录，存放系统运作时的运行时数据</td>
</tr>
<tr>
<td>/srv</td>
<td>服务目录，存放本地服务的相关文件</td>
</tr>
<tr>
<td>/sys</td>
<td>系统目录，存放系统硬件信息的相关文件</td>
</tr>
<tr>
<td>/tmp</td>
<td>临时目录，可以在该目录中创建和删除临时工作文件</td>
</tr>
<tr>
<td>/usr</td>
<td>用户二进制目录，大量用户级的GNU工具和数据文件都存储在这里</td>
</tr>
<tr>
<td>/var</td>
<td>可变目录，用以存放经常变化的文件，比如日志文件</td>
</tr>
</tbody>
</table>
<h4 id="查看帮助命令"><a href="#查看帮助命令" class="headerlink" title="查看帮助命令"></a>查看帮助命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">man <span class="built_in">command</span></span><br><span class="line">e.g. man ls</span><br><span class="line"></span><br><span class="line"><span class="built_in">command</span> --<span class="built_in">help</span></span><br><span class="line">e.g. ls --<span class="built_in">help</span></span><br></pre></td></tr></table></figure>
<h4 id="遍历目录-cd"><a href="#遍历目录-cd" class="headerlink" title="遍历目录(cd)"></a>遍历目录(<code>cd</code>)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> destination</span><br><span class="line"><span class="comment"># 绝对文件路径(以斜线/开始)</span></span><br><span class="line">christine@server01:~$ <span class="built_in">cd</span> /usr/bin </span><br><span class="line">christine@server01:/usr/bin$  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 当前工作目录</span></span><br><span class="line">christine@server01:/usr/bin$ <span class="built_in">pwd</span> </span><br><span class="line">/usr/bin </span><br><span class="line"></span><br><span class="line"><span class="comment"># 相对文件路径</span></span><br><span class="line"><span class="comment"># 单点符（.），表示当前目录</span></span><br><span class="line"><span class="comment"># 双点符（..），表示当前目录的父目录</span></span><br><span class="line">christine@server01:~/Documents$ <span class="built_in">cd</span> ..</span><br></pre></td></tr></table></figure>
<h3 id="文件和目录列表-ls"><a href="#文件和目录列表-ls" class="headerlink" title="文件和目录列表(ls)"></a>文件和目录列表(<code>ls</code>)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">ls option</span><br><span class="line">-F 添加指示符,在目录名后加了正斜线（/），在可执行文件的后面加个星号</span><br><span class="line">-a 显示隐藏文件和普通文件及目录</span><br><span class="line">-R 递归选项,列出了当前目录下包含的子目录中的文件</span><br><span class="line">-l 列表格式的输出</span><br><span class="line"></span><br><span class="line">$ ls -l </span><br><span class="line">total 48 </span><br><span class="line">drwxr-xr-x 2 christine christine 4096 Apr 22 20:37 Desktop </span><br><span class="line">-rwxrw-r-- 1 christine christine  54 May 21 11:26 my_script </span><br><span class="line"><span class="comment"># 参数说明</span></span><br><span class="line"><span class="comment"># 文件类型[目录（ d ）,文件（ - ）,字符型文件（ c ）,块设备（ b ）]</span></span><br><span class="line"><span class="comment"># 文件的权限 </span></span><br><span class="line"><span class="comment"># 文件的硬链接总数； </span></span><br><span class="line"><span class="comment"># 文件属主的用户名； </span></span><br><span class="line"><span class="comment"># 文件属组的组名； </span></span><br><span class="line"><span class="comment"># 文件的大小（以字节为单位）； </span></span><br><span class="line"><span class="comment"># 文件的上次修改时间； </span></span><br><span class="line"><span class="comment"># 文件名或目录名。 </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 过滤输出</span></span><br><span class="line"><span class="comment"># 文件扩展匹配（file globbing）</span></span><br><span class="line"><span class="comment"># 问号（ ? ）代表一个字符； </span></span><br><span class="line"><span class="comment"># 星号（ * ）代表零个或多个字符</span></span><br><span class="line">$ ls -l my_scr?pt </span><br><span class="line">$ ls -l my* </span><br><span class="line">ls -l my_scr[ai]pt</span><br></pre></td></tr></table></figure>
<h3 id="处理文件"><a href="#处理文件" class="headerlink" title="处理文件"></a>处理文件</h3><h4 id="创建文件"><a href="#创建文件" class="headerlink" title="创建文件"></a>创建文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch new_file</span><br></pre></td></tr></table></figure>
<h4 id="复制文件"><a href="#复制文件" class="headerlink" title="复制文件"></a>复制文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cp <span class="built_in">source</span> destination</span><br><span class="line">-p  same as --preserve 保留时间戳，权限等 mode,ownership,timestamps</span><br><span class="line">-R, -r, --recursive 递归拷贝 copy directories recursively</span><br></pre></td></tr></table></figure>
<h4 id="链接文件"><a href="#链接文件" class="headerlink" title="链接文件"></a>链接文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">在Linux中有两种不同类型的文件链接： 1.符号链接  2.硬链接 </span><br><span class="line"><span class="comment"># 符号链接,一个文件指向存放在虚拟目录结构中某个地方的另一个文件,这两个通过符号链接在一起的文件，彼此的内容并不相同</span></span><br><span class="line"><span class="comment"># 创建符号链接</span></span><br><span class="line">$ ls -l data_file </span><br><span class="line">-rw-rw-r-- 1 christine christine 1092 May 21 17:27 data_file </span><br><span class="line">$ ln -s data_file  sl_data_file </span><br><span class="line">$ ls -l *data_file </span><br><span class="line">-rw-rw-r-- 1 christine christine 1092 May 21 17:27 data_file </span><br><span class="line">lrwxrwxrwx 1 christine christine    9 May 21 17:29 sl_data_file -&gt; data_file </span><br><span class="line"></span><br><span class="line"><span class="comment"># 证明链接文件是独立文件,需要查看inode编号。文件或目录的inode编号是一个用于标识的唯一数字，这个数字由内核分配给文件系统中的每一个对象 </span></span><br><span class="line">$ ls -i *data_file </span><br><span class="line">296890 data_file  296891 sl_data_file </span><br><span class="line"></span><br><span class="line"><span class="comment"># 硬链接,会创建独立的虚拟文件，其中包含了原始文件的信息及位置。但是它们从根本上而言是同一个文件。引用硬链接文件等同于引用了源文件</span></span><br><span class="line">$ ls -l code_file </span><br><span class="line">-rw-rw-r-- 1 christine christine 189 May 21 17:56 code_file </span><br><span class="line">$ ln code_file  hl_code_file </span><br><span class="line">$ ls -li *code_file </span><br><span class="line">296892 -rw-rw-r-- 2 christine christine 189 May 21 17:56  code_file </span><br><span class="line">296892 -rw-rw-r-- 2 christine christine 189 May 21 17:56  hl_code_file </span><br><span class="line"><span class="comment"># 注意: 链接计数（列表中第三项）显示这两个文件都有两个链接</span></span><br><span class="line"><span class="comment"># 只能对处于同一存储媒体的文件创建硬链接。要想在不同存储媒体的文件之间创建链接，只能使用符号链接。</span></span><br></pre></td></tr></table></figure>
<h4 id="重命名文件-移动-moving"><a href="#重命名文件-移动-moving" class="headerlink" title="重命名文件(移动/moving)"></a>重命名文件(移动/moving)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mv 来移动文件的位置</span></span><br><span class="line">$ mv src dest</span><br><span class="line"></span><br><span class="line"><span class="comment"># mv 命令移动文件位置并修改文件名称</span></span><br><span class="line">$ mv /home/christine/Pictures/fzll  /home/christine/fall</span><br></pre></td></tr></table></figure>
<h4 id="删除文件"><a href="#删除文件" class="headerlink" title="删除文件"></a>删除文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">rm option file</span><br><span class="line">-f  --force 强制删除(ignore nonexistent files and arguments, never prompt)</span><br><span class="line">-i  删前提示(prompt before every removal)</span><br><span class="line">-r, -R, --recursive 递归删除(remove directories and their contents recursively)</span><br><span class="line"></span><br><span class="line">$ rm -rf file_or_dir</span><br></pre></td></tr></table></figure>
<h3 id="处理目录"><a href="#处理目录" class="headerlink" title="处理目录"></a>处理目录</h3><h4 id="创建目录"><a href="#创建目录" class="headerlink" title="创建目录"></a>创建目录</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir New_Dir </span><br><span class="line">-p, --parents 递归创建目录 no error <span class="keyword">if</span> existing, make parent directories as needed</span><br><span class="line">$ mkdir -p New_Dir/Sub_Dir/Under_Dir</span><br></pre></td></tr></table></figure>
<h4 id="删除目录"><a href="#删除目录" class="headerlink" title="删除目录"></a>删除目录</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rmdir New_Dir </span><br><span class="line"><span class="comment"># 默认情况下， rmdir命令只删除空目录</span></span><br><span class="line"><span class="comment"># 可以使用rm递归删除</span></span><br><span class="line">rm -rf New_Dir</span><br></pre></td></tr></table></figure>
<h4 id="查看目录-tree"><a href="#查看目录-tree" class="headerlink" title="查看目录(tree)"></a>查看目录(tree)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tree 工具 :美观的方式展示目录、子目录及其中的文件</span></span><br><span class="line">tree dir</span><br></pre></td></tr></table></figure>
<h3 id="查看文件内容"><a href="#查看文件内容" class="headerlink" title="查看文件内容"></a>查看文件内容</h3><h4 id="查看文件类型"><a href="#查看文件类型" class="headerlink" title="查看文件类型"></a>查看文件类型</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">file file_name</span><br><span class="line"></span><br><span class="line">$ file my_file </span><br><span class="line">my_file: ASCII text <span class="comment"># 文本文件</span></span><br><span class="line">$ file New_Dir </span><br><span class="line">New_Dir: directory <span class="comment"># 目录</span></span><br><span class="line">$ file sl_data_file </span><br><span class="line">sl_data_file: symbolic link to <span class="string">'data_file'</span>  <span class="comment"># 符号链接的文件</span></span><br><span class="line">$ file my_script </span><br><span class="line">my_script: Bourne-Again shell script, ASCII text executable  <span class="comment"># 脚本文件</span></span><br><span class="line">$ file /bin/ls </span><br><span class="line">/bin/ls: ELF 64-bit LSB  executable, x86-64, version 1 (SYSV),  <span class="comment"># 二进制可执行程序</span></span><br><span class="line">dynamically linked (uses shared libs), <span class="keyword">for</span> GNU/Linux 2.6.24,</span><br></pre></td></tr></table></figure>
<h4 id="查看整个文件"><a href="#查看整个文件" class="headerlink" title="查看整个文件"></a>查看整个文件</h4><h5 id="1-cat命令"><a href="#1-cat命令" class="headerlink" title="1.cat命令"></a>1.cat命令</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cat file <span class="comment">#显示文本文件中所有数据</span></span><br><span class="line">-n 加上行号</span><br><span class="line">-b 给有文本的行加上行号</span><br></pre></td></tr></table></figure>
<h4 id="2-more命令"><a href="#2-more命令" class="headerlink" title="2.more命令"></a>2.more命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">more file <span class="comment"># 分页工具</span></span><br><span class="line">空格:换页</span><br><span class="line">回车:逐行</span><br><span class="line">q:退出</span><br></pre></td></tr></table></figure>
<h5 id="3-less命令"><a href="#3-less命令" class="headerlink" title="3.less命令"></a>3.less命令</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">less file</span><br><span class="line"><span class="comment"># less is more, more命令的升级版</span></span><br></pre></td></tr></table></figure>
<h4 id="查看部分文件"><a href="#查看部分文件" class="headerlink" title="查看部分文件"></a>查看部分文件</h4><h5 id="1-tail命令"><a href="#1-tail命令" class="headerlink" title="1.tail命令"></a>1.tail命令</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># tai命令会显示文件最后几行的内容。默认情况下，它会显示文件的末尾10行</span></span><br><span class="line">tail file</span><br><span class="line">-n, --lines=[+]NUM output  the last NUM lines, instead of the last 10; or use -n +NUM to output starting with line NUM 控制显示行数</span><br><span class="line">-f, --follow[=&#123;name|descriptor&#125;]</span><br><span class="line">              output appended data as the file grows;</span><br><span class="line">              an absent option argument means <span class="string">'descriptor'</span></span><br><span class="line">              允许你在其他进程使用该文件时查看文件的内容。tail 命令会保持活动状态，并不断显示添加到文件              中的内容。这是实时监测系统日志的绝妙方式。 </span><br><span class="line">$ tail -n 2 log_file <span class="comment"># 显示最后两行</span></span><br><span class="line">line19 </span><br><span class="line">Last line - line20</span><br></pre></td></tr></table></figure>
<h5 id="2-head命令"><a href="#2-head命令" class="headerlink" title="2.head命令"></a>2.head命令</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># head命令，显示文件开头那些行的内容。默认情况下，它会显示文件前10行的文本.\</span></span><br><span class="line">head file</span><br><span class="line"></span><br><span class="line">head -5 log_file <span class="comment">#显示5行</span></span><br></pre></td></tr></table></figure>
<h2 id="2-更多的bash-shell命令"><a href="#2-更多的bash-shell命令" class="headerlink" title="2.更多的bash shell命令"></a>2.更多的bash shell命令</h2><h3 id="监测程序"><a href="#监测程序" class="headerlink" title="监测程序"></a>监测程序</h3><h4 id="探查进程-ps"><a href="#探查进程-ps" class="headerlink" title="探查进程(ps)"></a>探查进程(<code>ps</code>)</h4><p>Linux系统中使用的GNU <code>ps</code> 命令支持3种不同类型的命令行参数： </p>
<ol>
<li>Unix风格的参数，前面加单破折线, Unix风格的参数是从贝尔实验室开发的AT&amp;T Unix系统上原有的 ps 命令继承下来的</li>
<li>BSD风格的参数，前面不加破折线； </li>
<li>GNU风格的长参数，前面加双破折线。 </li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line">ps option</span><br><span class="line"><span class="comment"># Unix风格的ps命令参数 </span></span><br><span class="line">-A  显示所有进程 </span><br><span class="line">-N  显示与指定参数不符的所有进程 </span><br><span class="line">-a  显示除控制进程(session leader)和无终端进程外的所有进程 </span><br><span class="line">-d  显示除控制进程外的所有进程 </span><br><span class="line">-e  显示所有进程 </span><br><span class="line">-C cmdlist  显示包含在cmdlist列表中的进程 </span><br><span class="line">-G grplist  显示组ID在grplist列表中的进程 </span><br><span class="line">-U userlist  显示属主的用户ID在userlist列表中的进程 </span><br><span class="line">-g grplist  显示会话或组ID在grplist列表中的进程</span><br><span class="line">-p pidlist  显示PID在pidlist列表中的进程 </span><br><span class="line">-s sesslist  显示会话ID在sesslist列表中的进程 </span><br><span class="line">-t ttylist  显示终端ID在ttylist列表中的进程 </span><br><span class="line">-u userlist  显示有效用户ID在userlist列表中的进程 </span><br><span class="line">-F  显示更多额外输出（相对-f参数而言） </span><br><span class="line">-O format  显示默认的输出列以及format列表指定的特定列 </span><br><span class="line">-M  显示进程的安全信息 </span><br><span class="line">-c  显示进程的额外调度器信息 </span><br><span class="line">-f  显示完整格式的输出 </span><br><span class="line">-j  显示任务信息 </span><br><span class="line">-l  显示长列表 </span><br><span class="line">-o format  仅显示由format指定的列 </span><br><span class="line">-y  不要显示进程标记（process flag，表明进程状态的标记） </span><br><span class="line">-Z  显示安全标签（security context） ① 信息 </span><br><span class="line">-H  用层级格式来显示进程（树状，用来显示父进程） </span><br><span class="line">-n namelist  定义了WCHAN列显示的值 </span><br><span class="line">-w  采用宽输出模式，不限宽度显示 </span><br><span class="line">-L  显示进程中的线程 </span><br><span class="line">-V  显示ps命令的版本号 </span><br><span class="line"><span class="comment"># GNU长参数 </span></span><br><span class="line">--deselect  显示所有进程，命令行中列出的进程 </span><br><span class="line">--Group grplist  显示组ID在grplist列表中的进程 </span><br><span class="line">--User userlist  显示用户ID在userlist列表中的进程 </span><br><span class="line">--group grplist  显示有效组ID在grplist列表中的进程 </span><br><span class="line">--pid pidlist  显示PID在pidlist列表中的进程 </span><br><span class="line">--ppid pidlist  显示父PID在pidlist列表中的进程 </span><br><span class="line">--sid sidlist  显示会话ID在sidlist列表中的进程 </span><br><span class="line">--tty ttylist  显示终端设备号在ttylist列表中的进程 </span><br><span class="line">--user userlist  显示有效用户ID在userlist列表中的进程 </span><br><span class="line">--format format  仅显示由format指定的列 </span><br><span class="line">--context  显示额外的安全信息 </span><br><span class="line">--cols n  将屏幕宽度设置为n列 </span><br><span class="line">--columns n  将屏幕宽度设置为n列 </span><br><span class="line">--cumulative  包含已停止的子进程的信息 </span><br><span class="line">--forest  用层级结构显示出进程和父进程之间的关系 </span><br><span class="line">--headers  在每页输出中都显示列的头 </span><br><span class="line">--no-headers  不显示列的头 </span><br><span class="line">--lines n  将屏幕高度设为n行 </span><br><span class="line">--rows n  将屏幕高度设为n排 </span><br><span class="line">--sort order  指定将输出按哪列排序 </span><br><span class="line">--width n  将屏幕宽度设为n列 </span><br><span class="line">--<span class="built_in">help</span>  显示帮助信息 </span><br><span class="line">--info  显示调试信息 </span><br><span class="line">--version  显示ps命令的版本号 </span><br><span class="line"><span class="comment"># 默认情况下， ps命令只会显示运行在当前控制台下的属于当前用户的进程</span></span><br><span class="line">$ ps </span><br><span class="line">PID TTY          TIME CMD </span><br><span class="line">3081 pts/0    00:00:00 bash </span><br><span class="line">3209 pts/0    00:00:00 ps </span><br><span class="line">$</span><br><span class="line"><span class="comment"># -ef选项 -e 参数指定显示所有运行在系统上的进程； -f 参数则扩展了输出</span></span><br><span class="line">$ ps -ef </span><br><span class="line">UID        PID  PPID  C STIME TTY          TIME CMD </span><br><span class="line">root        1    0  0 11:29 ?        00:00:01 init [5] </span><br><span class="line">root        2    0  0 11:29 ?        00:00:00 [kthreadd] </span><br><span class="line">root      3078  1981  0 12:00 ?        00:00:00 sshd: rich [priv] </span><br><span class="line">rich      3080  3078  0 12:00 ?        00:00:00 sshd: rich@pts/0 </span><br><span class="line">rich      3081  3080  0 12:00 pts/0    00:00:00 -bash </span><br><span class="line">rich      4445  3081  3 13:48 pts/0    00:00:00 ps -ef </span><br><span class="line"><span class="comment"># 参数说明</span></span><br><span class="line">UID：启动这些进程的用户。 </span><br><span class="line">PID：进程的进程ID。 </span><br><span class="line">PPID：父进程的进程号（如果该进程是由另一个进程启动的）。 </span><br><span class="line">C：进程生命周期中的CPU利用率。 </span><br><span class="line">STIME：进程启动时的系统时间。 </span><br><span class="line">TTY：进程启动时的终端设备。 </span><br><span class="line">TIME：运行进程需要的累计CPU时间。 </span><br><span class="line">CMD：启动的程序名称。 </span><br><span class="line"></span><br><span class="line"><span class="comment"># -l 参数，它会产生一个长格式输出。</span></span><br><span class="line">$ ps -l </span><br><span class="line">F S  UID PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY      TIME  CMD </span><br><span class="line">0 S  500 3081  3080  0  80  0 -  1173 <span class="built_in">wait</span> pts/0  00:00:00 bash </span><br><span class="line">0 R  500 4463  3081  1  80  0 -  1116 -    pts/0  00:00:00 ps </span><br><span class="line"><span class="comment"># 参数说明</span></span><br><span class="line">F ：内核分配给进程的系统标记。 </span><br><span class="line">S ：进程的状态（O代表正在运行；S代表在休眠；R代表可运行，正等待运行；Z代表僵化，进程已结束但父进程已不存在；T代表停止）。 </span><br><span class="line">PRI ：进程的优先级（越大的数字代表越低的优先级）。 </span><br><span class="line">NI ：谦让度值用来参与决定优先级。 </span><br><span class="line">ADDR ：进程的内存地址。 </span><br><span class="line">SZ ：假如进程被换出，所需交换空间的大致大小。 </span><br><span class="line">WCHAN ：进程休眠的内核函数的地址。</span><br><span class="line"></span><br><span class="line"><span class="comment"># 常用ps命令选项</span></span><br><span class="line">$ ps -elf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示进程树</span></span><br><span class="line">$ ps --forest</span><br></pre></td></tr></table></figure>
<h4 id="实时监测进程-top"><a href="#实时监测进程-top" class="headerlink" title="实时监测进程 (top)"></a>实时监测进程 (top)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">top - 09:42:15 up 10 days,  9:55,  1 user,  load average: 0.00, 0.00, 0.00</span><br><span class="line">Tasks:  22 total,  1 running,  21 sleeping,  0 stopped,  0 zombie</span><br><span class="line">Cpu(s):  0.3%us,  0.0%sy,  0.0%ni, 99.7%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st</span><br><span class="line">Mem:    524288k total,  110564k used,  413724k free,        0k buffers</span><br><span class="line">Swap:    65536k total,    65536k used,        0k free,    28868k cached</span><br><span class="line">  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND</span><br><span class="line">    1 root      20  0 19232  116  24 S  0.0  0.0  0:00.01 init</span><br><span class="line">    3 root      20  0    0    0    0 S  0.0  0.0  0:00.00 khelper/512917</span><br><span class="line">  866 mysql    20  0  373m 1336  128 S  0.0  0.3  1:36.24 mysqld</span><br><span class="line">  943 root      20  0 1194m  28m 3664 S  0.0  5.6  0:42.29 node</span><br><span class="line">11213 root      20  0 11440 1788 1400 S  0.0  0.3  0:00.00 bash</span><br><span class="line"></span><br><span class="line"><span class="comment"># 说明</span></span><br><span class="line"><span class="comment">## 第一部分 :系统的概况</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 第一行显示了当前时间、系统的运行时间、登录的用户数以及系统的平均负载。</span></span><br><span class="line"><span class="comment"># 平均负载有3个值：最近1分钟的、最近5分钟的和最近15分钟的平均负载。值越大说明系统的负载越高。由于进程短期的突发性活动，出现最近1分钟的高负载值也很常见，但如果近15分钟内的平均负载都很高，就说明系统可能有问题</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 第二行显示了进程概要信息—— top命令的输出中将进程叫作任务（task）：有多少进程处在运行、休眠、停止或是僵化状态（僵化状态是指进程完成了，但父进程没有响应）。 </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 第三行显示了CPU的概要信息。 top 根据进程的属主（用户还是系统）和进程的状态（运行、空闲还是等待）将CPU利用率分成几类输出</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 第四行显示了系统的物理内存：总共有多少内存，当前用了多少，还有多少空闲</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 第五行显示了系统交换空间的状态</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 第二部分：当前运行中的进程的详细列表</span></span><br><span class="line"></span><br><span class="line">PID：进程的ID。 </span><br><span class="line">USER：进程属主的名字。 </span><br><span class="line">PR：进程的优先级。 </span><br><span class="line">NI：进程的谦让度值。 </span><br><span class="line">VIRT：进程占用的虚拟内存总量。 </span><br><span class="line">RES：进程占用的物理内存总量。 </span><br><span class="line">SHR：进程和其他进程共享的内存总量。 </span><br><span class="line">S：进程的状态（D代表可中断的休眠状态，R代表在运行状态，S代表休眠状态，T代表跟踪状态或停止状态，Z代表僵化状态）。 </span><br><span class="line">%CPU：进程使用的CPU时间比例。 </span><br><span class="line">%MEM：进程使用的内存占可用内存的比例。 </span><br><span class="line">TIME+：自进程启动到目前为止的CPU时间总量。 </span><br><span class="line">COMMAND：进程所对应的命令行名称，也就是启动的程序名。</span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认情况下,top 命令在启动时会按照 %CPU 值对进程排序。可以在 top 运行时使用多种交互命令重新排序。每个交互式命令都是单字符。</span></span><br><span class="line">f :选择对输出进行排序的字段，</span><br><span class="line">d :修改轮询间隔。</span><br><span class="line">q :退出</span><br></pre></td></tr></table></figure>
<h4 id="结束进程"><a href="#结束进程" class="headerlink" title="结束进程"></a>结束进程</h4><h5 id="Linux进程信号"><a href="#Linux进程信号" class="headerlink" title="Linux进程信号"></a>Linux进程信号</h5><p>在Linux中，进程之间通过信号来通信。进程的信号就是预定义好的一个消息，进程能识别它并决定忽略还是作出反应。进程如何处理信号是由开发人员通过编程来决定的。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Linux进程信号</span></span><br><span class="line">信号 名称  描述 </span><br><span class="line">1    HUP  挂起 </span><br><span class="line">2    INT  中断 </span><br><span class="line">3    QUIT  结束运行 </span><br><span class="line">9    KILL  无条件终止 </span><br><span class="line">11  SEGV  段错误 </span><br><span class="line">15  TERM  尽可能终止 </span><br><span class="line">17  STOP  无条件停止运行，但不终止 </span><br><span class="line">18  TSTP  停止或暂停，但继续在后台运行 </span><br><span class="line">19  CONT  在STOP或TSTP之后恢复执行</span><br></pre></td></tr></table></figure>
<h5 id="kill命令"><a href="#kill命令" class="headerlink" title="kill命令"></a>kill命令</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># kill 命令可通过进程ID（PID）给进程发信号。默认情况下， kill 命令会向命令行中列出的全部PID发送一个 TERM 信号</span></span><br><span class="line"><span class="comment"># 要发送进程信号，你必须是进程的属主或登录为root用户</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -s 参数支持指定信号名或信号值</span></span><br><span class="line">$ <span class="built_in">kill</span> -s HUP 3940 </span><br><span class="line"></span><br><span class="line"><span class="comment"># 常用kill命令,强制终止进程</span></span><br><span class="line">$ <span class="built_in">kill</span> -9 3940</span><br></pre></td></tr></table></figure>
<h5 id="killall命令"><a href="#killall命令" class="headerlink" title="killall命令"></a>killall命令</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># killall 它支持通过进程名而不是PID来结束进程。 killall 命令也支持通配符</span></span><br><span class="line">$ killall http*</span><br></pre></td></tr></table></figure>
<h3 id="监测磁盘空间"><a href="#监测磁盘空间" class="headerlink" title="监测磁盘空间"></a>监测磁盘空间</h3><h4 id="挂载存储媒体"><a href="#挂载存储媒体" class="headerlink" title="挂载存储媒体"></a>挂载存储媒体</h4><p>Linux文件系统将所有的磁盘都并入一个虚拟目录下。在使用新的存储媒体之前，需要把它放到虚拟目录下。这项工作称为挂载（mounting）</p>
<h5 id="1-mount命令"><a href="#1-mount命令" class="headerlink" title="1.mount命令"></a>1.mount命令</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Linux上用来挂载媒体的命令叫作mount 。默认情况下， mount命令会输出当前系统上挂载的设备列表</span></span><br><span class="line">$ mount </span><br><span class="line">proc on /proc <span class="built_in">type</span> proc (rw) </span><br><span class="line">sysfs on /sys <span class="built_in">type</span> sysfs (rw)</span><br><span class="line">/dev/sda1 on /boot <span class="built_in">type</span> ext3 (rw) </span><br><span class="line">sunrpc on /var/lib/nfs/rpc_pipefs <span class="built_in">type</span> rpc_pipefs (rw) /dev/sdb1 on /media/disk <span class="built_in">type</span> vfat (rw,nosuid,nodev,uhelper=hal,shortname=lower,uid=503) </span><br><span class="line">$ </span><br><span class="line"><span class="comment"># mount 命令提供如下四部分信息 </span></span><br><span class="line"><span class="comment"># 媒体的设备文件名 </span></span><br><span class="line"><span class="comment"># 媒体挂载到虚拟目录的挂载点 </span></span><br><span class="line"><span class="comment"># 文件系统类型 </span></span><br><span class="line"><span class="comment"># 已挂载媒体的访问状态 </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 手动在虚拟目录中挂载设备命令</span></span><br><span class="line">mount -t <span class="built_in">type</span> device directory </span><br><span class="line"><span class="comment"># type:指定了磁盘被格式化的文件系统类型</span></span><br><span class="line"><span class="comment">## vfat：Windows长文件系统。 </span></span><br><span class="line"><span class="comment">## ntfs：Windows NT、XP、Vista以及Windows 7中广泛使用的高级文件系统。 </span></span><br><span class="line"><span class="comment">## iso9660：标准CD-ROM文件系统。 </span></span><br><span class="line"><span class="comment"># device:存储设备的设备文件的位置</span></span><br><span class="line"><span class="comment"># directory:挂载点在虚拟目录中的位置</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 手动将U盘/dev/sdb1挂载到/media/disk</span></span><br><span class="line">mount -t vfat /dev/sdb1 /media/disk </span><br><span class="line"></span><br><span class="line"><span class="comment"># mount命令的参数 </span></span><br><span class="line">-a  挂载/etc/fstab文件中指定的所有文件系统 </span><br><span class="line">-f  使mount命令模拟挂载设备，但并不真的挂载 </span><br><span class="line">-F  和-a参数一起使用时，会同时挂载所有文件系统 </span><br><span class="line">-v  详细模式，将会说明挂载设备的每一步 </span><br><span class="line">-I  不启用任何/sbin/mount.filesystem下的文件系统帮助文件 </span><br><span class="line">-l  给ext2、ext3或XFS文件系统自动添加文件系统标签 </span><br><span class="line">-n  挂载设备，但不注册到/etc/mtab已挂载设备文件中 </span><br><span class="line">-p num  进行加密挂载时，从文件描述符num中获得密码短语 </span><br><span class="line">-s  忽略该文件系统不支持的挂载选项 </span><br><span class="line">-r  将设备挂载为只读的 </span><br><span class="line">-w  将设备挂载为可读写的（默认参数） </span><br><span class="line">-L label  将设备按指定的label挂载 </span><br><span class="line">-U uuid  将设备按指定的uuid挂载 </span><br><span class="line">-O  和-a参数一起使用，限制命令只作用到特定的一组文件系统上 </span><br><span class="line">-o  给文件系统添加特定的选项 </span><br><span class="line"></span><br><span class="line">-o 参数允许在挂载文件系统时添加一些以逗号分隔的额外选项。</span><br><span class="line"><span class="comment"># 常用的选项。 </span></span><br><span class="line">ro ：以只读形式挂载。 </span><br><span class="line">rw ：以读写形式挂载。 </span><br><span class="line">user ：允许普通用户挂载文件系统。 </span><br><span class="line">check=none ：挂载文件系统时不进行完整性校验。 </span><br><span class="line">loop ：挂载一个文件。</span><br></pre></td></tr></table></figure>
<h5 id="2-umount命令"><a href="#2-umount命令" class="headerlink" title="2.umount命令"></a>2.umount命令</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 从Linux系统上移除一个可移动设备时，不能直接从系统上移除，而应该先卸载。</span></span><br><span class="line"><span class="comment"># umount 命令支持通过设备文件或者是挂载点来指定要卸载的设备</span></span><br><span class="line">umount [directory | device ] </span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果有任何程序正在使用设备上的文件，系统就不会允许你卸载它</span></span><br><span class="line">[root@testbox mnt]<span class="comment"># umount /home/rich/mnt </span></span><br><span class="line">umount: /home/rich/mnt: device is busy  </span><br><span class="line">[root@testbox mnt]<span class="comment"># cd /home/rich </span></span><br><span class="line">[root@testbox rich]<span class="comment"># umount /home/rich/mnt </span></span><br><span class="line">[root@testbox rich]<span class="comment"># ls -l mnt </span></span><br><span class="line">total 0 </span><br><span class="line"><span class="comment">#  如果在卸载设备时，系统提示设备繁忙，无法卸载设备，通常是有进程还在访问该设备或使用该设备上的文件。</span></span><br><span class="line"><span class="comment">#  这时可用 lsof 命令获得使用它的进程信息，然后在应用中停止使用该设备或停止该进程。 lsof 命令的用法很简</span></span><br><span class="line"><span class="comment">#  单： lsof /path/to/device/node ，或者 lsof /path/to/mount/point 。</span></span><br></pre></td></tr></table></figure>
<h4 id="使用-df-命令"><a href="#使用-df-命令" class="headerlink" title="使用 df 命令"></a>使用 df 命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看所有已挂载磁盘的使用情况, df命令会显示每个有数据的已挂载文件系统</span></span><br><span class="line">$ df </span><br><span class="line">Filesystem          1K-blocks      Used Available Use% Mounted on </span><br><span class="line">/dev/sda2            18251068  7703964  9605024  45% / </span><br><span class="line">/dev/sda1              101086    18680    77187  20% /boot </span><br><span class="line"><span class="comment"># 参数说明</span></span><br><span class="line"><span class="comment">## 设备的设备文件位置； </span></span><br><span class="line"><span class="comment">## 能容纳多少个1024字节大小的块； </span></span><br><span class="line"><span class="comment">## 已用了多少个1024字节大小的块； </span></span><br><span class="line"><span class="comment">## 还有多少个1024字节大小的块可用； </span></span><br><span class="line"><span class="comment">## 已用空间所占的比例； </span></span><br><span class="line"><span class="comment">## 设备挂载到了哪个挂载点上。 </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 常用选项 -h(human reading)，查看可用空间</span></span><br><span class="line">$ df -h </span><br><span class="line">Filesystem            Size  Used Avail Use% Mounted on </span><br><span class="line">/dev/sdb2              18G  7.4G  9.2G  45% / </span><br><span class="line">/dev/sda1              99M  19M  76M  20% /boot</span><br></pre></td></tr></table></figure>
<h4 id="使用-du-命令"><a href="#使用-du-命令" class="headerlink" title="使用 du 命令"></a>使用 du 命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># du命令可以显示某个特定目录（默认情况下是当前目录）的磁盘使用情况</span></span><br><span class="line"><span class="comment"># 默认情况下， du 命令会显示当前目录下所有的文件、目录和子目录的磁盘使用情况，它会以磁盘块为单位来表明每个文件或目录占用了多大存储空间。对标准大小的目录来说，这个输出会是一个比较长的列表</span></span><br><span class="line">$ du </span><br><span class="line">484    ./.gstreamer-0.10 </span><br><span class="line">8      ./Templates </span><br><span class="line">8      ./Download </span><br><span class="line">8      ./.ccache/7/0 </span><br><span class="line"><span class="comment"># 每行输出左边的数值是每个文件或目录占用的磁盘块数。注意，这个列表是从目录层级的最底部开始，然后按文件、子目录、目录逐级向上</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 常见参数</span></span><br><span class="line">-c ：显示所有已列出文件总的大小。 </span><br><span class="line">-h ：按用户易读的格式输出大小，即用K替代千字节，用M替代兆字节，用G替代吉字节。 </span><br><span class="line">-s ：显示每个输出参数的总计。 </span><br><span class="line"></span><br><span class="line"><span class="comment"># 常见用法 查看当前目录所有的文件，目录和子目录的磁盘使用情况</span></span><br><span class="line">du -h</span><br></pre></td></tr></table></figure>
<h3 id="处理数据文件"><a href="#处理数据文件" class="headerlink" title="处理数据文件"></a>处理数据文件</h3><h4 id="排序数据"><a href="#排序数据" class="headerlink" title="排序数据"></a>排序数据</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># sort命令按照会话指定的默认语言的排序规则对文本文件中的数据行排序</span></span><br><span class="line">sort [options] file</span><br><span class="line"><span class="comment"># sort命令参数 </span></span><br><span class="line">-b  --ignore-leading-blanks  排序时忽略起始的空白 </span><br><span class="line">-C  --check=quiet  不排序，如果数据无序也不要报告 </span><br><span class="line">-c  --check  不排序，但检查输入数据是不是已排序；未排序的话，报告 </span><br><span class="line">-d  --dictionary-order  仅考虑空白和字母，不考虑特殊字符 </span><br><span class="line">-f  --ignore-case  默认情况下，会将大写字母排在前面；这个参数会忽略大小写 </span><br><span class="line">-g  --general-number-sort  按通用数值来排序（跟-n不同，把值当浮点数来排序，支持科学计数法表示的值） </span><br><span class="line">-i  --ignore-nonprinting  在排序时忽略不可打印字符 </span><br><span class="line">-k  --key=POS1[,POS2]  排序从POS1位置开始；如果指定了POS2的话，到POS2位置结束 </span><br><span class="line">-M  --month-sort  用三字符月份名按月份排序 </span><br><span class="line">-m  --merge  将两个已排序数据文件合并 </span><br><span class="line">-n  --numeric-sort  按字符串数值来排序（并不转换为浮点数） </span><br><span class="line">-o  --output=file  将排序结果写出到指定的文件中 </span><br><span class="line">-R  --random-sort  按随机生成的散列表的键值排序 </span><br><span class="line">  --random-source=FILE  指定-R参数用到的随机字节的源文件 </span><br><span class="line">-r  --reverse  反序排序（升序变成降序） </span><br><span class="line">-S  --buffer-size=SIZE  指定使用的内存大小 </span><br><span class="line">-s  --stable  禁用最后重排序比较 </span><br><span class="line">-T  --temporary-directory=DIR  指定一个位置来存储临时工作文件 </span><br><span class="line">-t  --field-separator=SEP  指定一个用来区分键位置的字符 </span><br><span class="line">-u  --unique  和-c参数一起使用时，检查严格排序；不和-c参数一起用时，仅输出第一例相似的两行 </span><br><span class="line">-z  --zero-terminated  用NULL字符作为行尾，而不是用换行符 </span><br><span class="line"></span><br><span class="line"><span class="comment"># 常见用法</span></span><br><span class="line"><span class="comment"># /etc/passwd根据用户ID进行数值排序</span></span><br><span class="line">$ sort -t <span class="string">':'</span> -k 3 -n /etc/passwd </span><br><span class="line">root:x:0:0:root:/root:/bin/bash </span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin </span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看占用空间</span></span><br><span class="line">$ du -sh * | sort -nr </span><br><span class="line">1008k  mrtg-2.9.29.tar.gz </span><br><span class="line">972k    bldg1 </span><br><span class="line">888k    fbs2.pdf</span><br></pre></td></tr></table></figure>
<h4 id="搜索数据"><a href="#搜索数据" class="headerlink" title="搜索数据"></a>搜索数据</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># grep 命令会在输入或指定的文件中查找包含匹配指定模式的字符的行。 grep 的输出就是包含了匹配模式的行</span></span><br><span class="line"><span class="comment"># 默认情况下， grep 命令用基本的Unix风格正则表达式来匹配模式</span></span><br><span class="line">grep [options] pattern [file]</span><br><span class="line"><span class="comment"># 常见参数 </span></span><br><span class="line">-v 反向搜索（输出不匹配该模式的行）</span><br><span class="line">-n 显示匹配模式的行所在的行号</span><br><span class="line">-c 含有匹配的模式行数</span><br><span class="line">-e 指定多个匹配模式</span><br><span class="line">$ grep -e t -e f file1 </span><br><span class="line"></span><br><span class="line"><span class="comment"># egrep 命令是 grep 的一个衍生，支持POSIX扩展正则表达式。POSIX扩展正则表达式含有更多的可以用来指定匹配模式的字符</span></span><br><span class="line"><span class="comment">#  fgrep 则是另外一个版本，支持将匹配模式指定为用换行符分隔的一列固定长度的字符串</span></span><br></pre></td></tr></table></figure>
<h4 id="压缩数据"><a href="#压缩数据" class="headerlink" title="压缩数据"></a>压缩数据</h4><p>#####1. 压缩文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gzip file_name</span><br></pre></td></tr></table></figure>
<p>#####2.解压文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gunzip file_name</span><br></pre></td></tr></table></figure>
<h4 id="归档数据"><a href="#归档数据" class="headerlink" title="归档数据"></a>归档数据</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">tar <span class="keyword">function</span> [options] object1 object2 ... </span><br><span class="line"><span class="comment"># tar命令的功能 </span></span><br><span class="line">-A  --concatenate  将一个已有tar归档文件追加到另一个已有tar归档文件 </span><br><span class="line">-c  --create  创建一个新的tar归档文件 </span><br><span class="line">-d  --diff  检查归档文件和文件系统的不同之处 </span><br><span class="line">  --delete  从已有tar归档文件中删除 </span><br><span class="line">-r  --append  追加文件到已有tar归档文件末尾 </span><br><span class="line">-t  --list  列出已有tar归档文件的内容 </span><br><span class="line">-u  --update  将比tar归档文件中已有的同名文件新的文件追加到该tar归档文件中 </span><br><span class="line">-x  --extract  从已有tar归档文件中提取文件 </span><br><span class="line"><span class="comment"># tar命令选项 </span></span><br><span class="line">-C dir  切换到指定目录 </span><br><span class="line">-f file  输出结果到文件或设备file  </span><br><span class="line">-j  将输出重定向给bzip2命令来压缩内容 </span><br><span class="line">-p  保留所有文件权限 </span><br><span class="line">-v  在处理文件时显示文件 </span><br><span class="line">-z  将输出重定向给gzip命令来压缩内容</span><br></pre></td></tr></table></figure>
<h5 id="1-归档文件"><a href="#1-归档文件" class="headerlink" title="1.归档文件"></a>1.归档文件</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 文件名以.tgz/.tar.gz结尾 代表是gzip压缩过的tar文件</span></span><br><span class="line">tar -zcvf dest.tar.gz file1 dir1</span><br></pre></td></tr></table></figure>
<p>#####2.列出文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -tf test.tar.gz</span><br></pre></td></tr></table></figure>
<h6 id="3-提取文件"><a href="#3-提取文件" class="headerlink" title="3.提取文件"></a>3.提取文件</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf test.tar.gz</span><br></pre></td></tr></table></figure>
<h2 id="3-理解shell"><a href="#3-理解shell" class="headerlink" title="3.理解shell"></a>3.理解shell</h2><h3 id="shell-的父子关系"><a href="#shell-的父子关系" class="headerlink" title="shell 的父子关系"></a>shell 的父子关系</h3><p>用于登录某个虚拟控制器终端或在GUI中运行终端仿真器时所启动的默认的交互shell，是一个父shell</p>
<p>在CLI提示符后输入 /bin/bash 命令或其他等效的 bash 命令时，会创建一个新的shell程序。这个shell程序被称为子shell（child shell）。子shell也拥有CLI提示符，同样会等待命令输入.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ ps -f </span><br><span class="line">UID        PID  PPID  C STIME TTY          TIME CMD </span><br><span class="line">501      1841  1840  0 11:50 pts/0    00:00:00 -bash </span><br><span class="line">501      2429  1841  4 13:44 pts/0    00:00:00 ps -f </span><br><span class="line">$ </span><br><span class="line">$ bash </span><br><span class="line">$ </span><br><span class="line">$ ps -f </span><br><span class="line">UID        PID  PPID  C STIME TTY          TIME CMD </span><br><span class="line">501      1841  1840  0 11:50 pts/0    00:00:00 -bash </span><br><span class="line">501      2430  1841  0 13:44 pts/0    00:00:00 bash </span><br><span class="line">501      2444  2430  1 13:44 pts/0    00:00:00 ps -f </span><br><span class="line">$ </span><br><span class="line"><span class="comment"># 第一个bash shell程序，也就是父shell进程，其原始进程ID是 1814 。第二个bash shell程序，即子shell进程，其PID是 2430 。注意，子shell的父进程ID（PPID）是 1841 ，指明了这个父shell进程就是该子shell的父进程</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#  bash命令行参数 </span></span><br><span class="line">-c string  从string中读取命令并进行处理 </span><br><span class="line">-i  启动一个能够接收用户输入的交互shell </span><br><span class="line">-l  以登录shell的形式启动 </span><br><span class="line">-r  启动一个受限shell，用户会被限制在默认目录中 </span><br><span class="line">-s  从标准输入中读取命令</span><br></pre></td></tr></table></figure>
<h4 id="查看父子进程之间的关系"><a href="#查看父子进程之间的关系" class="headerlink" title="查看父子进程之间的关系"></a>查看父子进程之间的关系</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -elf --forest</span><br></pre></td></tr></table></figure>
<h4 id="退出shell"><a href="#退出shell" class="headerlink" title="退出shell"></a>退出shell</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure>
<h3 id="进程列表"><a href="#进程列表" class="headerlink" title="进程列表"></a>进程列表</h3><p>进程列表 生成一个子shell来执行对应的命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">pwd</span> ; ls ; <span class="built_in">cd</span> /etc ; <span class="built_in">pwd</span> ; <span class="built_in">cd</span> ; <span class="built_in">pwd</span> ; ls ; <span class="built_in">echo</span> <span class="variable">$BASH_SUBSHELL</span> </span><br><span class="line">Documents  junk.dat  Pictures  Templates </span><br><span class="line">0 </span><br><span class="line"><span class="comment"># 在命令输出的最后，显示的是数字 0 。这就表明这些命令不是在子shell中运行的</span></span><br><span class="line">$ (<span class="built_in">pwd</span> ; ls ; <span class="built_in">cd</span> /etc ; <span class="built_in">pwd</span> ; <span class="built_in">cd</span> ; <span class="built_in">pwd</span> ; ls ; <span class="built_in">echo</span> <span class="variable">$BASH_SUBSHELL</span>) </span><br><span class="line">Documents  junk.dat  Pictures  Templates </span><br><span class="line">1 </span><br><span class="line"><span class="comment"># 这次在命令输入的最后显示出了数字 1 。这表明的确创建了子shell，并用于执行这些命令。 所以说，命令列表就是使用括号包围起来的一组命令，它能够创建出子shell来执行这些命令</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 进程列表是一种命令分组（command grouping）。另一种命令分组是将命令放入花括号中，并在命令列表尾部加上分号（;）。语法为 &#123; command; &#125; 。使用花括号进行命令分组并不会像进程列表那样创建出子shel</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># echo $BASH_SUBSHELL 。如果该命令返回 0 ，就表明没有子shell。如果返回1 或者其他更大的数字，就表明存在子shell</span></span><br></pre></td></tr></table></figure>
<h3 id="别出心裁的子-shell-用法"><a href="#别出心裁的子-shell-用法" class="headerlink" title="别出心裁的子 shell 用法"></a>别出心裁的子 shell 用法</h3><h4 id="后台作业-background-job"><a href="#后台作业-background-job" class="headerlink" title="后台作业(background job)"></a>后台作业(background job)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span> &amp;</span><br><span class="line">[1] 2396 <span class="comment"># 1:后台作业号 2396:后台作业进程id</span></span><br><span class="line">[1]+ Done <span class="built_in">command</span> <span class="comment">#作业完成后的提示</span></span><br></pre></td></tr></table></figure>
<p>显示当前运行在后台模式中的所有用户的进程(作业)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">jobs</span></span><br><span class="line">[1]+ Running <span class="built_in">command</span></span><br></pre></td></tr></table></figure>
<h3 id="理解-shell-的内建命令"><a href="#理解-shell-的内建命令" class="headerlink" title="理解 shell 的内建命令"></a>理解 shell 的内建命令</h3><h4 id="外部命令"><a href="#外部命令" class="headerlink" title="外部命令"></a>外部命令</h4><p>也被称为文件系统命令，是存在于bash shell之外的程序。它们并不是shell程序的一部分。外部命令程序通常位于<code>/bin</code>、<code>/usr/bin</code>、<code>/sbin</code>或<code>/usr/sbin</code>中。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ps就是一个外部命令。你可以使用 which 和 type 命令找到它。</span></span><br><span class="line">$ <span class="built_in">which</span> ps</span><br><span class="line">/bin/ps</span><br><span class="line">$</span><br><span class="line">$ <span class="built_in">type</span> -a ps</span><br><span class="line">ps is /bin/ps</span><br><span class="line">$</span><br><span class="line">$ ls -l /bin/ps</span><br><span class="line">-rwxr-xr-x 1 root root 93232 Jan  6 18:32 /bin/ps</span><br><span class="line"><span class="comment"># 当外部命令执行时，会创建出一个子进程。这种操作被称为衍生（forking）。外部命令 ps 很方便显示出它的父进程以及自己所对应的衍生子进程。 </span></span><br><span class="line">$ ps -f </span><br><span class="line">UID        PID  PPID  C STIME TTY          TIME CMD </span><br><span class="line">christi+  2743  2742  0 17:09 pts/9    00:00:00 -bash </span><br><span class="line">christi+  2801  2743  0 17:16 pts/9    00:00:00 ps -f </span><br><span class="line"></span><br><span class="line"><span class="comment"># 就算衍生出子进程或是创建了子shell，你仍然可以通过发送信号与其沟通，发送信号（signaling）使得进程间可以通过信号进行通信</span></span><br></pre></td></tr></table></figure>
<h4 id="内建命令"><a href="#内建命令" class="headerlink" title="内建命令"></a>内建命令</h4><p>内建命令和外部命令的区别在于前者不需要使用子进程来执行。它们已经和shell编译成了一体，作为shell工具的组成部分存在。不需要借助外部程序文件来运行。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cd 和 exit 命令都内建于bash shell。可以利用 type 命令来了解某个命令是否是内建的。</span></span><br><span class="line">$ <span class="built_in">type</span> <span class="built_in">cd</span></span><br><span class="line"><span class="built_in">cd</span> is a shell <span class="built_in">builtin</span></span><br><span class="line">$</span><br><span class="line">$ <span class="built_in">type</span> <span class="built_in">exit</span></span><br><span class="line"><span class="built_in">exit</span> is a shell <span class="built_in">builtin</span></span><br><span class="line"><span class="comment"># 因为既不需要通过衍生出子进程来执行，也不需要打开程序文件，内建命令的执行速度要更快，效率也更高</span></span><br></pre></td></tr></table></figure>
<p>要注意，有些命令有多种实现。例如 echo 和 pwd 既有内建命令也有外部命令。两种实现略有不同。要查看命令的不同实现，使用 type 命令的 -a 选项。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">type</span> -a <span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> is a shell <span class="built_in">builtin</span></span><br><span class="line"><span class="built_in">echo</span> is /bin/<span class="built_in">echo</span></span><br><span class="line">$</span><br><span class="line">$ <span class="built_in">which</span> <span class="built_in">echo</span></span><br><span class="line">/bin/<span class="built_in">echo</span></span><br><span class="line">$</span><br><span class="line">$ <span class="built_in">type</span> -a <span class="built_in">pwd</span></span><br><span class="line"><span class="built_in">pwd</span> is a shell <span class="built_in">builtin</span></span><br><span class="line"><span class="built_in">pwd</span> is /bin/<span class="built_in">pwd</span></span><br><span class="line">$</span><br><span class="line">$ <span class="built_in">which</span> <span class="built_in">pwd</span></span><br><span class="line">/bin/<span class="built_in">pwd</span></span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<p>命令 type -a 显示出了每个命令的两种实现。注意， which 命令只显示出了外部命令文件。</p>
<h5 id="1-history命令"><a href="#1-history命令" class="headerlink" title="1.history命令"></a>1.history命令</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看最近用过的命令列表</span></span><br><span class="line"><span class="built_in">history</span></span><br><span class="line">!! <span class="comment">#重新执行上一条命令</span></span><br><span class="line">!20 <span class="comment">#唤回历史列表中任意一条命令。只需输入惊叹号和命令在历史列表中的编号即可</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 命令历史记录被保存在隐藏文件.bash_history中，它位于用户的主目录中。这里要注意的是，bash命令的历史记录是先存放在内存中，当shell退出时才被写入到历史文件中。</span></span><br><span class="line">$ <span class="built_in">history</span> -a <span class="comment">#强制将命令历史记录提前写入写入</span></span><br><span class="line">$ <span class="built_in">history</span> -n <span class="comment">#更新终端会话的历史记录</span></span><br></pre></td></tr></table></figure>
<p>#####2. 命令别名</p>
<p>alias 命令是另一个shell的内建命令。命令别名允许你为常用的命令（及其参数）创建另一个名称，从而将输入量减少到最低。 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看当前可用的别名</span></span><br><span class="line"><span class="built_in">alias</span> -p</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建别名 一个别名仅在它所被定义的shell进程中才有效。</span></span><br><span class="line"><span class="built_in">alias</span> li=<span class="string">'ls -li'</span></span><br></pre></td></tr></table></figure>
<h2 id="参考书目"><a href="#参考书目" class="headerlink" title="参考书目"></a>参考书目</h2><p>《Linux命令行与shell脚本编程大全》第3版</p>

	
	</div>
  <a type="button" href="/2018/02/14/linux-cmd-1-bash-shell-command/#more" class="btn btn-default more">阅读此文</a>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2017-11-28 </div>
			<div class="article-title"><a href="/2017/11/28/thymeleaf-3-study/" >Thymeleaf 3 学习</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<h2 id="1-介绍"><a href="#1-介绍" class="headerlink" title="1.介绍"></a>1.介绍</h2><p>Thymeleaf (麝香草叶子), <strong>/ˈtaɪmˌlɪːf/</strong> 是一个服务端java模板引擎框架,它能够处理多种数据格式，包括HTML, XML, JavaScript, CSS以及普通文本。</p>
<h2 id="2-简单的示例"><a href="#2-简单的示例" class="headerlink" title="2.简单的示例"></a>2.简单的示例</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="comment">&lt;!--声明 th 名称空间--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Good Thymes Virtual Grocery<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">media</span>=<span class="string">"all"</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">href</span>=<span class="string">"../../css/gtvg.css"</span> <span class="attr">th:href</span>=<span class="string">"@&#123;/css/gtvg.css&#125;"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 引用文本--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">"#&#123;home.welcome&#125;"</span>&gt;</span>Welcome to our grocery store!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Thymeleaf使用<code>th:*</code> 给现有HTML标签增加属性,因此直接打开模板也能预览效果,很方便 。使用时首先需要像在jsp中一样，在<code>html</code>标签内声明th名称空间，然后就可以使用了。</p>
<h2 id="3-Standard-Expression-Syntax-标准表达式语法"><a href="#3-Standard-Expression-Syntax-标准表达式语法" class="headerlink" title="3.Standard Expression Syntax(标准表达式语法)"></a>3.Standard Expression Syntax(标准表达式语法)</h2><ul>
<li>Variable Expressions(变量表达式): <code>${...}</code></li>
<li>Selection Variable Expressions(选择变量表达式): <code>*{...}</code></li>
<li>Message Expressions(消息表达式): <code>#{...}</code></li>
<li>Link URL Expressions(链接url表达式): <code>@{...}</code></li>
<li>Fragment Expressions(代码片段表达式): <code>~{...}</code></li>
</ul>
<h3 id="1-Messages-信息"><a href="#1-Messages-信息" class="headerlink" title="(1).Messages (信息)"></a>(1).Messages (信息)</h3><p>该表达书主要为了实现i18n国际化，需要将多语言的文本放在<code>/WEB-INF/templates</code>目录下，如下</p>
<ul>
<li><code>/WEB-INF/templates/home_en.properties</code> 英文的翻译.</li>
<li><code>/WEB-INF/templates/home.properties</code> 默认的文本</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--常用使用方法--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">"#&#123;home.welcome&#125;"</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">p</span>&gt;</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--unescaped text 不转义文本--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:utext</span>=<span class="string">"#&#123;home.welcome&#125;"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>也可以传参给文本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#home.properties文件</span><br><span class="line">home.welcome=hello, &#123;0&#125;!</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Thymeleaf解析后会将p标签中的Welcome User!替换为th:text指定的文本 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">"#&#123;home.welcome($&#123;session.user.name&#125;)&#125;"</span>&gt;</span></span><br><span class="line">  Welcome User!</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--消息的key也可以通过动态去获取  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:utext</span>=<span class="string">"#&#123;$&#123;welcomeMsgKey&#125;($&#123;session.user.name&#125;)&#125;"</span>&gt;</span></span><br><span class="line">  Welcome User!</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>###(2).Variables(变量)</p>
<p>Thymeleaf的 ${…}是OGNL (Object-Graph Navigation Language) expressions 语法格式，跟jsp中使用方法差不多,使用示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">* Access to properties using the point (.). Equivalent to calling property getters.</span><br><span class="line">*/</span><br><span class="line">$&#123;person.father.name&#125;</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">* Access to properties can also be made by using brackets ([]) and writing </span><br><span class="line">* the name of the property as a variable or between single quotes.</span><br><span class="line">*/</span><br><span class="line">$&#123;person[&apos;father&apos;][&apos;name&apos;]&#125;</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">* If the object is a map, both dot and bracket syntax will be equivalent to </span><br><span class="line">* executing a call on its get(...) method.</span><br><span class="line">*/</span><br><span class="line">$&#123;countriesByCode.ES&#125;</span><br><span class="line">$&#123;personsByName[&apos;Stephen Zucchini&apos;].age&#125;</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">* Indexed access to arrays or collections is also performed with brackets, </span><br><span class="line">* writing the index without quotes.</span><br><span class="line">*/</span><br><span class="line">$&#123;personsArray[0].name&#125;</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">* Methods can be called, even with arguments.</span><br><span class="line">*/</span><br><span class="line">$&#123;person.createCompleteName()&#125;</span><br><span class="line">$&#123;person.createCompleteNameWithSeparator(&apos;-&apos;)&#125;</span><br></pre></td></tr></table></figure>
<h4 id="表达式基本对象-Expression-Basic-Objects-，-开始"><a href="#表达式基本对象-Expression-Basic-Objects-，-开始" class="headerlink" title="表达式基本对象(Expression Basic Objects)，#开始"></a>表达式基本对象(Expression Basic Objects)，#开始</h4><ul>
<li><p><code>#ctx</code>: the context object. </p>
</li>
<li><p><code>#vars:</code> the context variables.</p>
</li>
<li><p><code>#locale</code>: the context locale.</p>
</li>
<li><p><code>#request</code>: (only in Web Contexts) the <code>HttpServletRequest</code> object.</p>
</li>
<li><p><code>#response</code>: (only in Web Contexts) the <code>HttpServletResponse</code> object.</p>
</li>
<li><p><code>#session</code>: (only in Web Contexts) the <code>HttpSession</code> object.</p>
</li>
<li><p><code>#servletContext</code>: (only in Web Contexts) the <code>ServletContext</code> object.</p>
</li>
</ul>
<h5 id="表达式工具对象"><a href="#表达式工具对象" class="headerlink" title="表达式工具对象"></a>表达式工具对象</h5><ul>
<li><code>#execInfo</code>: information about the template being processed. </li>
<li><code>#messages</code>: methods for obtaining externalized messages inside variables expressions, in the same way as they would be obtained using #{…} syntax.</li>
<li><code>#uris</code>: methods for escaping parts of URLs/URIs</li>
<li><code>#conversions</code>: methods for executing the configured <em>conversion service</em> (if any).</li>
<li><code>#dates</code>: methods for <code>java.util.Date</code> objects: formatting, component extraction, etc.</li>
<li><code>#calendars</code>: analogous to <code>#dates</code>, but for <code>java.util.Calendar</code> objects.</li>
<li><code>#numbers</code>: methods for formatting numeric objects.</li>
<li><code>#strings</code>: methods for <code>String</code> objects: contains, startsWith, prepending/appending, etc.</li>
<li><code>#objects</code>: methods for objects in general.</li>
<li><code>#bools</code>: methods for boolean evaluation.</li>
<li><code>#arrays</code>: methods for arrays.</li>
<li><code>#lists</code>: methods for lists.</li>
<li><code>#sets</code>: methods for sets.</li>
<li><code>#maps</code>: methods for maps.</li>
<li><code>#aggregates</code>: methods for creating aggregates on arrays or collections.</li>
<li><code>#ids</code>: methods for dealing with id attributes that might be repeated (for example, as a result of an iteration).</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--表达式工具对象的使用--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">  Today is: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;#calendars.format(today,'dd MMMM yyyy')&#125;"</span>&gt;</span>13 May 2011<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-Expressions-on-selections-asterisk-syntax-选择表达式-星号语法"><a href="#3-Expressions-on-selections-asterisk-syntax-选择表达式-星号语法" class="headerlink" title="(3).Expressions on selections (asterisk syntax)(选择表达式 - 星号语法)"></a>(3).Expressions on selections (asterisk syntax)(选择表达式 - 星号语法)</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:object</span>=<span class="string">"$&#123;session.user&#125;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Name: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"*&#123;firstName&#125;"</span>&gt;</span>Sebastian<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Surname: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"*&#123;lastName&#125;"</span>&gt;</span>Pepper<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Nationality: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"*&#123;nationality&#125;"</span>&gt;</span>Saturn<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 等价于 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Name: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;session.user.firstName&#125;"</span>&gt;</span>Sebastian<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Surname: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;session.user.lastName&#125;"</span>&gt;</span>Pepper<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Nationality: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;session.user.nationality&#125;"</span>&gt;</span>Saturn<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 还可以混合使用--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:object</span>=<span class="string">"$&#123;session.user&#125;"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Name: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"*&#123;firstName&#125;"</span>&gt;</span>Sebastian<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Surname: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;session.user.lastName&#125;"</span>&gt;</span>Pepper<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Nationality: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"*&#123;nationality&#125;"</span>&gt;</span>Saturn<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- #object 引用表达式的对象 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:object</span>=<span class="string">"$&#123;session.user&#125;"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Name: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;#object.firstName&#125;"</span>&gt;</span>Sebastian<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Surname: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;session.user.lastName&#125;"</span>&gt;</span>Pepper<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Nationality: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"*&#123;nationality&#125;"</span>&gt;</span>Saturn<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>th:object</code>定义选择的对象,在标签内使用<code>*{...}</code>来取出对象中相应的数据，如果没有选择的对象直接使用<code>*{...}</code>等价于<code>#{...}</code></p>
<p>###(4).Link URLs(链接URL)</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Will produce 'http://localhost:8080/gtvg/order/details?orderId=3' (plus rewriting) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"details.html"</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">th:href</span>=<span class="string">"@&#123;http://localhost:8080/gtvg/order/details(orderId=$&#123;o.id&#125;)&#125;"</span>&gt;</span>view<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Will produce '/gtvg/order/details?orderId=3' (plus rewriting) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"details.html"</span> <span class="attr">th:href</span>=<span class="string">"@&#123;/order/details(orderId=$&#123;o.id&#125;)&#125;"</span>&gt;</span>view<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Will produce '/gtvg/order/3/details' (plus rewriting) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"details.html"</span> <span class="attr">th:href</span>=<span class="string">"@&#123;/order/&#123;orderId&#125;/details(orderId=$&#123;o.id&#125;)&#125;"</span>&gt;</span>view<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="5-Literals-文本"><a href="#5-Literals-文本" class="headerlink" title="(5).Literals(文本)"></a>(5).Literals(文本)</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 基本的使用--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">  Now you are looking at a <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"'working web application'"</span>&gt;</span>template file<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>The year is <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"2013"</span>&gt;</span>1492<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ==false 需要写在&#123;&#125;外面才交由thymeleaf处理，写在里面时交由 OGNL/SpringEL处理 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:if</span>=<span class="string">"$&#123;user.isAdmin()&#125; == false"</span>&gt;</span> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:if</span>=<span class="string">"$&#123;user.isAdmin() == false&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--判空--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:if</span>=<span class="string">"$&#123;variable.something&#125; == null"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 文本链接 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"'The name of the user is ' + $&#123;user.name&#125;"</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  <span class="comment">&lt;!-- 文本替换,(免去+号链接字符串),需要写在 || 之间</span></span><br><span class="line"><span class="comment">        仅变量，信息表达式可以使用$&#123;...&#125;, *&#123;...&#125;, #&#123;...&#125;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"|Welcome to our application, $&#123;user.name&#125;!|"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="6-Arithmetic-operations-算术操作"><a href="#6-Arithmetic-operations-算术操作" class="headerlink" title="(6).Arithmetic operations(算术操作)"></a>(6).Arithmetic operations(算术操作)</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 也可以使用文本 div (/), mod (%).--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:with</span>=<span class="string">"isEven=($&#123;prodStat.count&#125; % 2 == 0)"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="7-Comparators-and-Equality-比较"><a href="#7-Comparators-and-Equality-比较" class="headerlink" title="(7).Comparators and Equality(比较)"></a>(7).Comparators and Equality(比较)</h3><p>html起止标签的缘故，大于，小于等需要使用转义</p>
<p><code>gt</code> (<code>&gt;</code>), <code>lt</code> (<code>&lt;</code>), <code>ge</code> (<code>&gt;=</code>), <code>le</code> (<code>&lt;=</code>), <code>not</code> (<code>!</code>) <code>eq</code> (<code>==</code>), <code>neq</code>/<code>ne</code> (<code>!=</code>).</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:if</span>=<span class="string">"$&#123;prodStat.count&#125; &amp;gt; 1"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"'Execution mode is ' + ( ($&#123;execMode&#125; == 'dev')? 'Development' : 'Production')"</span></span></span><br></pre></td></tr></table></figure>
<h3 id="8-Conditional-expressions-条件表达式"><a href="#8-Conditional-expressions-条件表达式" class="headerlink" title="(8).Conditional expressions(条件表达式)"></a>(8).Conditional expressions(条件表达式)</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--C中的三元运算符 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:class</span>=<span class="string">"$&#123;row.even&#125;? 'even' : 'odd'"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 省略--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:class</span>=<span class="string">"$&#123;row.even&#125;? 'alt'"</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="9-Default-expressions-Elvis-operator-默认表达式"><a href="#9-Default-expressions-Elvis-operator-默认表达式" class="headerlink" title="(9). Default expressions (Elvis operator) 默认表达式"></a>(9). Default expressions (Elvis operator) 默认表达式</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:object</span>=<span class="string">"$&#123;session.user&#125;"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Age: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"*&#123;age&#125;?: '(no age specified)'"</span>&gt;</span>27<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 等价于,省略表达式为true时的语句 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Age: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"*&#123;age != null&#125;? *&#123;age&#125; : '(no age specified)'"</span>&gt;</span>27<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="10-The-No-Operation-token-空操作符"><a href="#10-The-No-Operation-token-空操作符" class="headerlink" title="(10). The No-Operation token(空操作符)"></a>(10). The No-Operation token(空操作符)</h3><p>空操作符( No-Operation token)使用下划线表示<code>_</code>，它允许原生页面定义的文本为默认值,便于模板的设计</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;user.name&#125; ?: 'no user authenticated'"</span>&gt;</span>...<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;user.name&#125; ?: _"</span>&gt;</span>no user authenticated<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="11-Data-Conversion-Formatting-数据转换-格式化"><a href="#11-Data-Conversion-Formatting-数据转换-格式化" class="headerlink" title="(11). Data Conversion / Formatting (数据转换/格式化)"></a>(11). Data Conversion / Formatting (数据转换/格式化)</h3><p>Thymeleaf 定义了双花括号语法用于变量<code>${...}</code>和选择表达式<code>*{...}</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;&#123;user.lastAccessDate&#125;&#125;"</span>&gt;</span>...<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="4-Iteration-遍历"><a href="#4-Iteration-遍历" class="headerlink" title="4.Iteration(遍历)"></a>4.Iteration(遍历)</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span>&gt;</span>NAME<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span>&gt;</span>PRICE<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span>&gt;</span>IN STOCK<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">"prod,iterStat : $&#123;prods&#125;"</span> <span class="attr">th:class</span>=<span class="string">"$&#123;iterStat.odd&#125;? 'odd'"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;prod.name&#125;"</span>&gt;</span>Onions<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;prod.price&#125;"</span>&gt;</span>2.41<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;prod.inStock&#125;? #&#123;true&#125; : #&#123;false&#125;"</span>&gt;</span>yes<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="th-each说明"><a href="#th-each说明" class="headerlink" title="th:each说明"></a>th:each说明</h3><p><code>prod</code>保存每次遍历的对象，<code>iterStat</code>保存遍历的相关信息</p>
<ul>
<li>The current <em>iteration index</em>, starting with 0. This is the <code>index</code> property. 遍历索引，从0开始</li>
<li>The current <em>iteration index</em>, starting with 1. This is the <code>count</code> property. 遍历计数，从1开始</li>
<li>The total amount of elements in the iterated variable. This is the <code>size</code> property.  被遍历对象的大小 </li>
<li>The <em>iter variable</em> for each iteration. This is the <code>current</code> property. 当前遍历的对象</li>
<li>Whether the current iteration is even or odd. These are the <code>even/odd</code> boolean properties. 奇偶布尔值</li>
<li>Whether the current iteration is the first one. This is the <code>first</code> boolean property. 是否是遍历第一个</li>
<li>Whether the current iteration is the last one. This is the <code>last</code> boolean property. 是否是遍历最后一个</li>
</ul>
<h3 id="被遍历的对象类型"><a href="#被遍历的对象类型" class="headerlink" title="被遍历的对象类型"></a>被遍历的对象类型</h3><ul>
<li>Any object implementing <code>java.util.Iterable</code></li>
<li>Any object implementing <code>java.util.Enumeration</code>.</li>
<li>Any object implementing <code>java.util.Iterator</code>, whose values will be used as they are returned by the iterator, without the need to cache all values in memory.</li>
<li>Any object implementing <code>java.util.Map</code>. When iterating maps, iter variables will be of class <code>java.util.Map.Entry</code>.</li>
<li>Any array.</li>
<li>Any other object will be treated as if it were a single-valued list containing the object itself.</li>
</ul>
<h2 id="5-Conditional-Evaluation-条件表达式"><a href="#5-Conditional-Evaluation-条件表达式" class="headerlink" title="5.Conditional Evaluation(条件表达式)"></a>5.Conditional Evaluation(条件表达式)</h2><h3 id="if和unless语句"><a href="#if和unless语句" class="headerlink" title="if和unless语句"></a>if和unless语句</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 如果if表达式成立则显示该标签--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"comments.html"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">th:href</span>=<span class="string">"@&#123;/product/comments(prodId=$&#123;prod.id&#125;)&#125;"</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">th:if</span>=<span class="string">"$&#123;not #lists.isEmpty(prod.comments)&#125;"</span>&gt;</span>view<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--还可以使用相反的表达式unless --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"comments.html"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">th:href</span>=<span class="string">"@&#123;/comments(prodId=$&#123;prod.id&#125;)&#125;"</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">th:unless</span>=<span class="string">"$&#123;#lists.isEmpty(prod.comments)&#125;"</span>&gt;</span>view<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="if遵循的规则"><a href="#if遵循的规则" class="headerlink" title="if遵循的规则"></a>if遵循的规则</h4><ul>
<li>If value is not null:<ul>
<li>If value is a boolean and is <code>true</code>.</li>
<li>If value is a number and is non-zero</li>
<li>If value is a character and is non-zero</li>
<li>If value is a String and is not “false”, “off” or “no”</li>
<li>If value is not a boolean, a number, a character or a String.</li>
</ul>
</li>
<li>(If value is null, th:if will evaluate to false).<h3 id="switch-case语句"><a href="#switch-case语句" class="headerlink" title="switch/case语句"></a>switch/case语句</h3></li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:switch</span>=<span class="string">"$&#123;user.role&#125;"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">th:case</span>=<span class="string">"'admin'"</span>&gt;</span>User is an administrator<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">th:case</span>=<span class="string">"#&#123;roles.manager&#125;"</span>&gt;</span>User is a manager<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">th:case</span>=<span class="string">"*"</span>&gt;</span>User is some other thing<span class="tag">&lt;/<span class="name">p</span>&gt;</span> <span class="comment">&lt;!--默认值--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="6-Template-Layout-模板布局"><a href="#6-Template-Layout-模板布局" class="headerlink" title="6.Template Layout (模板布局)"></a>6.Template Layout (模板布局)</h2><p>使用<code>th:fragment</code>定义需要复用的代码片段，<code>th:insert</code>或<code>th:replac</code>引用片段</p>
<p><code>~{templatename::selector}</code> 引用片段 </p>
<p><code>~{templatename}</code>引用整个文件 </p>
<p><code>~{::selector}</code>或<code>~{this::selector}</code>引用自身的代码片段 </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--定义代码片段 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:fragment</span>=<span class="string">"copy"</span>&gt;</span></span><br><span class="line">      &amp;copy; 2011 The Good Thymes Virtual Grocery</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 引用代码片 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:insert</span>=<span class="string">"footer :: copy"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 根据条件引用--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:insert</span>=<span class="string">"footer :: ($&#123;user.isAdmin&#125;? #&#123;footer.admin&#125; : #&#123;footer.normaluser&#125;)"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 根据id引用 css选择器语法类似--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"copy-section"</span>&gt;</span></span><br><span class="line">  &amp;copy; 2011 The Good Thymes Virtual Grocery</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:insert</span>=<span class="string">"~&#123;footer :: #copy-section&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="th-insert-th-replace-th-include"><a href="#th-insert-th-replace-th-include" class="headerlink" title="th:insert , th:replace ,th:include"></a><code>th:insert</code> , <code>th:replace</code> ,<code>th:include</code></h5><ul>
<li><p><code>th:insert</code> is the simplest: it will simply insert the specified fragment as the body of its host tag. (在定义的标签体内引用代码片段)</p>
</li>
<li><p><code>th:replace</code> actually <em>replaces</em> its host tag with the specified fragment.(将定义标签替换为引用的代码片段)</p>
</li>
<li><p><code>th:include</code> is similar to <code>th:insert</code>, but instead of inserting the fragment it only inserts the <em>contents</em> of this fragment.(Thymeleaf 3.0后不推荐使用)</p>
<h5 id="参数化方式引用代码片段-Parameterizable-fragment-signatures"><a href="#参数化方式引用代码片段-Parameterizable-fragment-signatures" class="headerlink" title="参数化方式引用代码片段(Parameterizable fragment signatures)"></a>参数化方式引用代码片段(Parameterizable fragment signatures)</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--定义参数化代码片段--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:fragment</span>=<span class="string">"frag (onevar,twovar)"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">"$&#123;onevar&#125; + ' - ' + $&#123;twovar&#125;"</span>&gt;</span>...<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--使用 使用参数名时顺序不重要 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">"::frag ($&#123;value1&#125;,$&#123;value2&#125;)"</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">"::frag (onevar=$&#123;value1&#125;,twovar=$&#123;value2&#125;)"</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">"::frag (twovar=$&#123;value2&#125;,onevar=$&#123;value1&#125;)"</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="7-Local-Variables-局部变量"><a href="#7-Local-Variables-局部变量" class="headerlink" title="7.Local Variables(局部变量)"></a>7.Local Variables(局部变量)</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 使用th:with定义,可以再标签体中使用--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:with</span>=<span class="string">"firstPer=$&#123;persons[0]&#125;"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    The name of the first person is <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;firstPer.name&#125;"</span>&gt;</span>Julius Caesar<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.</span><br><span class="line">  <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="8-参考资料"><a href="#8-参考资料" class="headerlink" title="8.参考资料"></a>8.参考资料</h2><p>1.Thymleaf Document(<a href="http://www.thymeleaf.org/documentation.html" target="_blank" rel="noopener">http://www.thymeleaf.org/documentation.html</a>)</p>
<p>2.属性优先级(<a href="http://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#attribute-precedence" target="_blank" rel="noopener">http://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#attribute-precedence</a>)</p>
<p>3.可用属性(<a href="http://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#setting-value-to-specific-attributes" target="_blank" rel="noopener">http://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#setting-value-to-specific-attributes</a>)</p>

	
	</div>
  <a type="button" href="/2017/11/28/thymeleaf-3-study/#more" class="btn btn-default more">阅读此文</a>
</div>

           
		

		</div>

		<!-- pagination -->
		<div>
  		<center>
		<div class="pagination">
<ul class="pagination">
	 
		
    	<li class="prev"><a href="/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i> 上一页</a></li>
  		

        <li><a href="/"><i class="fa fa-home"></i>Home</a></li>

		
          <li class="next disabled"><a>下一页<i class="fa fa-arrow-circle-o-right"></i></a></li>
        
	
</ul>
</div>

  		</center>
		</div>

		
		
	</div> <!-- col-md-9 -->

	
		<div class="col-md-3">
	<div id="sidebar">
	
			
  <div id="site_search">
   <div class="form-group">
    <input type="text" id="local-search-input" name="q" results="0" placeholder="搜索" class="st-search-input st-default-search-input form-control"/>
   </div>  
  <div id="local-search-result"></div>
  </div>


		
			<div class="widget">
    
</div>

		
			
		
			
	<div class="widget">
		<h4>标签云</h4>
		<ul class="tag_box inline list-unstyled">		
		
			<li><a href="/tags/Shell/">Shell<span>11</span></a></li>
		
			<li><a href="/tags/Linux/">Linux<span>11</span></a></li>
		
		 
		</ul>
	</div>


		
			
<div class="widget">
  <h4>最新文章</h4>
  <ul class="entry list-unstyled">
    
      <li>
        <a href="/2018/02/24/shell-script-6-function/" ><i class="fa fa-file-o"></i>shell脚本(6)创建函数</a>
      </li>
    
      <li>
        <a href="/2018/02/23/shell-script-5-script-control/" ><i class="fa fa-file-o"></i>shell脚本(5)控制脚本</a>
      </li>
    
      <li>
        <a href="/2018/02/22/shell-script-4-presenting-data/" ><i class="fa fa-file-o"></i>shell脚本(4)呈现数据</a>
      </li>
    
      <li>
        <a href="/2018/02/21/shell-script-3-user-input/" ><i class="fa fa-file-o"></i>shell脚本(3)处理用户输入</a>
      </li>
    
      <li>
        <a href="/2018/02/20/shell-script-2-structed-command/" ><i class="fa fa-file-o"></i>shell脚本(2)结构化命令</a>
      </li>
    
  </ul>
</div>

		
			
<div class="widget">
	<h4>链接</h4>
	<ul class="blogroll list-unstyled">
	
		<li><i class="fa fa-github"></i><a href="http://www.github.com/technonac" title="My Github account." target="_blank"]);">My Github</a></li>
	
	</ul>
</div>


		
	</div> <!-- sidebar -->
</div> <!-- col-md-3 -->

	
	
</div> <!-- row-fluid -->


	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  &copy; 2018 technonac
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.    
</p> </footer>
</div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/search.js"></script> 


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



   <script type="text/javascript">      
     var search_path = "search.xml";
	 if (search_path.length == 0) {
	 	search_path = "search.xml";
	 }
	 var path = "/" + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');
   </script>


<!-- syntax highlighting -->


</body>
   </html>
